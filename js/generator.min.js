function PlaceIdeaOnPage(e,n){generatedSeed=Math.random().toString().substring(2,13),(e||""==seedBox.value)&&(seedBox.value=generatedSeed),seedBox.value?Math.seedrandom(seedBox.value):Math.seedrandom(generatedSeed),$("#genreoptions").is(":visible")||$("#genreoptions").show(700),$.when(wordlistsCall).done(function(){if(generatedidea=GenerateIdea(removeGenre.checked),ideaPositionOnPage.innerHTML=generatedidea,SetAndShowHistory(seedBox.value,genreSelect.value,removeGenre.checked),n){var e=document.getElementById("details");e.innerHTML="gt: "+gt+"<br />n1: "+n1+"<br />n2: "+n2+"<br />n3: "+n3+"<br />n4: "+n4+"<br />c: "+c+"<br />l: "+l+"<br />v1: "+v1+"<br />v2: "+v2+"<br />vc: "+vc+"<br />a1: "+a1+"<br />a2: "+a2+"<br />a3: "+a3+"<br />a4: "+a4+"<br />d: "+d+"<br />o1: "+o1+"<br />o2: "+o2+"<br />o3: "+o3+"<br />o4: "+o4+"<br />structure: "+sentencestructure}}).fail(function(){alert("Can't get word lists. Try again later.")})}function GenerateIdea(e){var n="";n+=SetGenre(e);var o=[BuildSentence1,BuildSentence2,BuildSentence3,BuildSentence4,BuildSentence5];return n+=o[RandomNumber(o.length)](),n=n.trim(),n+=CoinToss()?AddAddonPiece():".",n+="<end />"}function TrimWhitespaceFromLists(){for(var e=Object.getOwnPropertyNames(wordlists),n=0;n<e.length;n++)for(var o=0;o<wordlists[e[n]].length;o++)"string"==typeof wordlists[e[n]][o]?"string"==typeof wordlists[e[n]][o]&&(wordlists[e[n]][o]=wordlists[e[n]][o].trim()):("string"==typeof wordlists[e[n]][o][0]&&(wordlists[e[n]][o][0]=wordlists[e[n]][o][0].trim()),"string"==typeof wordlists[e[n]][o][1]&&(wordlists[e[n]][o][1]=wordlists[e[n]][o][1].trim()))}function SetGenre(e){var n="",o=genreSelect.value,s=RandomNumber(wordlists.gametypes.length);return e?n+="A ":"undefined"!=typeof o&&""!=o?(n+=GetArticle(o,!0),n+=o):(n+=GetArticle(wordlists.gametypes[s],!0),n+=wordlists.gametypes[s]),n+=" game where "}function SetAndShowHistory(e,n,o){$.when(wordlistsCall).done(function(){var s=[],t=getCookie("history"),d="";""!=t&&(s=t.split("<end />,"));for(var r=0;r<s.length;r++)-1==s[r].indexOf("<end />")&&(s[r]+="<end />");null!=generatedidea&&""!=generatedidea&&(d="Seed: "+htmlspecialchars(e),""!=n&&(d+=' -- (Genre Locked to "'+n.trim().replace("A ","").replace("An ","")+'")'),o&&(d+=" -- (Genre Removed)"),d+="<br />"+generatedidea.replace("<div id='genre'>","").replace("</div>",""),s.unshift(d)),s.length>6&&(s=s.slice(0,6)),setCookie("history",s,-1);for(var i=document.getElementById("history"),a="",r=""==generatedidea?0:1;r<s.length-(""==generatedidea&&s.length>6?1:0);r++)if(""!=s[r]){var c="history"+r;a+='<p id="'+c+'" class="clickable" title="Click to Highlight for easy copying" onclick="selectText(\''+c+"');\">"+s[r]+"</p>"}i.innerHTML=a})}function BuildSentence1(){var e="",n=CoinToss(),o=CoinToss();return e+=AddNounPiece(CoinToss(),!0),e+=AddNounPiece(CoinToss(),!1),n&&(e+=AddLocationPiece()),o&&(e+=AddConnectorPiece(),e+=AddNounPiece(CoinToss(),!0),e+=AddNounPiece(CoinToss(),!1)),e}function BuildSentence2(){var e="",n=CoinToss(),o=CoinToss(),s=RandomNumber(wordlists.nouns.length),t=o&&CoinToss(),d=CoinToss();return e+=AddSecondPersonPiece(),e+=AddNounPiece(CoinToss(),!1,s,!1,d),n&&(e+=AddLocationPiece()),o&&(e+=AddConnectorPiece(),t?(e+=AddNounPiece(!t,!0,s,t,d),e+="you"):(e+=AddSecondPersonPiece(),e+=AddNounPiece(CoinToss(),!1))),e}function BuildSentence3(){var e="",n=CoinToss();return e+=AddSecondPersonPiece(),e+=AddNounPiece(CoinToss(),!1),n&&(e+=AddLocationPiece()),e+=" "+wordlists.reasons[RandomNumber(wordlists.reasons.length)]+" ",e+=AddNounPiece(CoinToss(),!1)}function BuildSentence4(){var e="",n=CoinToss();return e+=AddConceptPiece(),n&&(CoinToss()?(e+=AddConnectorPiece(),CoinToss()?(e+=AddSecondPersonPiece(),e+=AddNounPiece(CoinToss(),!1)):(e+=AddNounPiece(CoinToss(),!0),e+=CoinToss()?"you":AddNounPiece(CoinToss(),!1))):(e+=" "+wordlists.reasons[RandomNumber(wordlists.reasons.length)]+" ",e+=AddNounPiece(CoinToss(),!1))),e}function BuildSentence5(){var e="";return CoinToss()?e+="you explore ":(e+=AddNounPiece(!1,!1,RandomNumber(wordlists.nouns.length),!1,!1),e+=" explores "),e+=AddLocationPiece(!1),CoinToss()?(e+=AddConnectorPiece(),CoinToss()?(e+=AddSecondPersonPiece(),e+=AddNounPiece(CoinToss(),!1)):(e+=AddNounPiece(CoinToss(),!0),e+=CoinToss()?"you":AddNounPiece(CoinToss(),!1))):(e+=" "+wordlists.reasons[RandomNumber(wordlists.reasons.length)]+" ",e+=AddNounPiece(CoinToss(),!1)),e}function AddNounPiece(e,n,o,s,t){e="undefined"!=typeof e?e:CoinToss(),n="undefined"!=typeof n?n:!0,noun="undefined"!=typeof o?o:RandomNumber(wordlists.nouns.length),s="undefined"!=typeof s?s:!1,t="undefined"!=typeof t?t:CoinToss();var d="",r=CoinToss(),i=RandomNumber(wordlists.adjectives.length);return s?d+="the same ":(t||e||(d+=GetArticle(r?wordlists.adjectives[i]:wordlists.nouns[noun][0])),e&&(d+=wordlists.superlatives[RandomNumber(wordlists.superlatives.length)]+" "),r&&!s&&(d+=wordlists.adjectives[i]+" ")),d+=t?wordlists.nouns[noun][1]:wordlists.nouns[noun][0],n&&(d+=" "+(t?wordlists.verbs2nd[RandomNumber(wordlists.verbs2nd.length)]:wordlists.verbs3rd[RandomNumber(wordlists.verbs3rd.length)])+" "),d}function AddLocationPiece(e){e="undefined"!=typeof e?e:!0;var n=" ",o=CoinToss(),s=RandomNumber(wordlists.descriptions.length),t=RandomNumber(wordlists.locations.length);if(e)switch(RandomNumber(10)){case 0:n+="near ";break;case 1:n+="under ";break;case 2:n+="around ";break;case 3:n+="to win ";break;case 4:n+="beside ";break;case 5:n+="to destroy ";break;case 6:n+="above ";break;default:n+="in "}return o?(n+=GetArticle(wordlists.descriptions[s]),n+=wordlists.descriptions[s]+" "):n+=GetArticle(wordlists.locations[t]),n+=wordlists.locations[t]}function AddSecondPersonPiece(){var e="you ";return e+=wordlists.verbs2nd[RandomNumber(wordlists.verbs2nd.length)]+" "}function AddConceptPiece(){var e="you ";return e+=wordlists.verbs2ndConcepts[RandomNumber(wordlists.verbs2ndConcepts.length)]+" ",e+=wordlists.concepts[RandomNumber(wordlists.concepts.length)]}function AddConnectorPiece(){var e="",n=RandomNumber(wordlists.connections.length);return[".",","].indexOf(wordlists.connections[n].substr(0,1))<0&&(e+=" "),e+=wordlists.connections[n]+" "}function AddAddonPiece(){var e="",n=RandomNumber(wordlists.addons.length);return[".",","].indexOf(wordlists.addons[n].substr(0,1))<0&&(e+=" "),e+=wordlists.addons[n]}function GetArticle(e,n){return e=e.trim(),"a"===e.toLowerCase().substr(0,1)||"e"===e.toLowerCase().substr(0,1)||"i"===e.toLowerCase().substr(0,1)||"o"===e.toLowerCase().substr(0,1)||"u"===e.toLowerCase().substr(0,1)?(n?"A":"a")+"n ":(n?"A":"a")+" "}function RandomNumber(e){return Math.floor(Math.random()*e)}function CoinToss(){return 1==RandomNumber(2)}var wordlists,generatedSeed="0000000000",generatedidea="",genreLockedTo="",ideaPositionOnPage=document.getElementById("ideatext"),seedBox=document.getElementById("seedbox"),lockGenre=document.getElementById("lock"),removeGenre=document.getElementById("remove"),lockOption=document.getElementById("lockoption"),genreSelect=document.getElementById("genredropdown"),wordlistsCall=$.getJSON("values/wordlists.json",function(e){wordlists=e,TrimWhitespaceFromLists();for(var n=0;n<wordlists.gametypes.length;n++){var o=document.createElement("option");o.appendChild(document.createTextNode(wordlists.gametypes[n])),o.value=wordlists.gametypes[n],genreSelect.appendChild(o)}});